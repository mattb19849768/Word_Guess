<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word Guess - Select Player</title>
<link rel="stylesheet" href="style.css">
</head>
<body id="home">
  <main>
    <h1>Word Guess</h1>
    <p>Select or enter your name to start:</p>

    <!-- Dropdown for existing players -->
    <select id="playerSelect">
      <option value="" disabled selected>Choose a player</option>
    </select>
    <br><br>

    <!-- Input for new player -->
    <input type="text" id="playerName" placeholder="Or enter new player name" />
    <br><br>

    <button id="startGameBtn" class="control-btn">Start Game</button>
  </main>

  <script>
    const startBtn = document.getElementById('startGameBtn');
    const playerInput = document.getElementById('playerName');
    const playerSelect = document.getElementById('playerSelect');

    let players = JSON.parse(localStorage.getItem('players') || '[]');

    function renderPlayers() {
      playerSelect.innerHTML = '<option value="" disabled selected>Choose a player</option>';
      players.forEach(name => {
        if (typeof name === 'string') {
          const option = document.createElement('option');
          option.value = name;
          option.textContent = name;
          playerSelect.appendChild(option);
        }
      });
    }

    startBtn.addEventListener('click', () => {
      let name = playerInput.value.trim();
      if (!name) name = playerSelect.value;
      if (!name) return alert('Please select or enter a player name!');
      if (!players.includes(name)) {
        players.push(name);
        localStorage.setItem('players', JSON.stringify(players));
      }
      localStorage.setItem('currentPlayer', name);
      window.location.href = 'game.html';
    });

    renderPlayers();
  </script>
</body>
</html>